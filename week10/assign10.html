<!DOCTYPE html>
<html lang="en-us">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css2?family=Bree+Serif&family=Lobster&family=Roboto&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="./css/main.css">
  <title>Darrin Fry Week 10 Directory Listing</title>
  <meta name="description" content="CS213 Directory Listing">
</head>

<body class="body-group">
  <header class="header-group">
    <div>
      <div class="heading">
        <h1>Week 10 Directory Listing</h1>
      </div>
      <nav>
        <ul class="navigation">
          <li><a class="ham" href="#">&#9776; Menu</a></li>
          <li><a class="index" href="../index.html">CS213 Assignments</a></li>

        </ul>
      </nav>
    </div>
  </header>

  <div class="hero-image">
  </div id="directory">

  <div>

  </div>

  <footer class="footer-content">
    <p>&copy; 2020 | Darrin Fry | Utah |
      <a href="https://www.byui.edu/online " target="_blank">BYUI Online Learning</a> </p>
    <script>
      const hambutton = document.querySelector(".ham");
      hambutton.addEventListener("click", toggleMenu, false);

      function toggleMenu() {
        document.querySelector(".navigation").classList.toggle("responsive");
      }
    </script>

    <script>
      let data = document.getElementById("directory");
      data.onload = getJSON();
      function getJSON() {
        let fileName = "./assign10.php";
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function () {
          debugger;
          if (this.readyState == 4 && this.status == 200) {
            printOnScreen(this);
          } else {
            directory.innerHTML = "ERROR: 404 File Not Found";
          }
        }
        xhttp.open("GET", fileName, true);
        xhttp.send();
      }

      function printOnScreen(myJSON) {
        let files = JSON.parse(myJSON.responseText);
        let table = "<table><tr><th>File Name</th><th>File Type</th><th>CWD</th><th>Link</th></tr>";
        for (var i = 0; i < files.length; i++) {
          let link = "";
          if (files[i].fileType != "dir") {
            link = "<a href = \"./" + files[i].fileName + "\" target=\"_blank\">Click Here</a>";
          } else {
            link = "";
          }
          table += "<tr><td>" + files[i].fileName + "</td><td>" + files[i].fileType + "</td><td>" +
            files[i].cwd + "</td><td>" + link + "</td></tr>"
        }
        table += "</table>";
        directory.innerHTML = table;
      }
    </script>
  </footer>

</body>

</html>